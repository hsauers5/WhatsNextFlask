<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="next" href="categories.html">
<head>
<style type="text/css">
	html { 
	  background: url(https://raw.githubusercontent.com/hsauers5/KnighthacksFrontend/master/app/assets/moneyBackgound.png) no-repeat center center fixed;
	  -webkit-background-size: cover;
	  -moz-background-size: cover;
	  -o-background-size: cover;
	  background-size: cover;
	}
	body {
		background-repeat: no-repeat;
	}
	.container {
        height: 100%;
		font-family: Arial;
		background-repeat: no-repeat;
    }
	.start-button {
		background-color: #42b0f4;
        color: #FFFFFF;
		border-color: #42b0f4;
		font-family: Arial;
		font-size: 18px;
        padding: 10px;
        border-radius: 0px;
        -moz-border-radius: 0px;
        -webkit-border-radius: 0px;
        margin: 0px
	}
	.intro {
		position: absolute;
		top: 45%;
		left: 50%;
		transform: translate(-50%, -50%);
	}
</style>

<script>
  var lat = 0;
  var lon = 0;

  var options = {
    enableHighAccuracy: true,
    timeout: 5000,
    maximumAge: 0
  };

  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, null, options);
    } else { 
      x.innerHTML = "Geolocation is not supported by this browser.";
    }
  }

  function showPosition(position) {
    lat = position.coords.latitude;
    lon = position.coords.longitude;
    // alert("Latitude: " + lat + " Longitude: " + lon);
  }
  
  function redirect() {
    const Http = new XMLHttpRequest();
    const url="categories?location=" + lat + "," + lon;
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange=(e)=>{
      setTimeout(function(){
        console.log(Http.responseText); window.location.href="categories.html";}, 500);
    }
   
    while (lat == 0) {
      getLocation();
    }
	  
  }

</script>

</head>

<body>

	<div id="main" class="container" style="">
		<div class="intro">
			<h2 style="color: #5e9ca0; text-align: center; font-style: oblique;"><span style="color: #ffffff;">take the guesswork out of going out.</span></h2>
			<p style="text-align: center;">
				<button class="start-button"  onload="getLocation();" onclick='redirect();'> Get Started </button>
			</p>
		</div>
	</div>

</body>
</html>
